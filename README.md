# Polls application: 

## I. Notes:
### I.1. .gitignore:
* [Reference](https://github.com/github/gitignore/blob/master/Python.gitignore) about the Python .gitignore

### I.2. .idea:
* Definition: The .idea directory contains a set of configuration files for the project.
* [Reference](https://intellij-support.jetbrains.com/hc/en-us/articles/206544839-How-to-manage-projects-under-Version-Control-Systems) about How to manage projects under Version Control Systems.
* Check status of the .idea folder: 
```commandline
git status .idea/
```

### I.3. Webserver vs. Application server:
* Most of the web frameworks usually contain a lightweight web server for agile development and testing (e.g., Django, ExpressJS, NestJS). However, if you want to run your application on a production site, you must use a robust web server, such as Apache or Nginx.
* Apache is a collection of projects that include a web server (Apache HTTP) and application server (Tomcat), in addition to lots of other middleware libraries and systems.
* [Reference](https://www.educative.io/edpresso/web-server-vs-application-server?utm_source=Google%20AdWords&aid=5082902844932096&utm_medium=cpc&utm_campaign=kb-dynamic-edpresso&gclid=CjwKCAiA17P9BRB2EiwAMvwNyP_uHFhWnD34DERlPxayNvFzEn2bomypbGFVJjGJ-Py9BmMnsqiXxBoCcMgQAvD_BwE).

### I.4. Production deployment: 
* [Reference](https://docs.djangoproject.com/en/3.1/topics/install/).

### I.5. LAN deployment:
* [Reference](https://docs.djangoproject.com/en/3.1/ref/django-admin/#django-admin-runserver) 

### I.6. SQLite:
* [Windows SQLite installation](https://www.tutorialspoint.com/sqlite/sqlite_installation.htm)
> After installing and adding SQLite shell to the environment variables, you must restart all Pycharm processes to load it.

* To interact with the SQLite DB created by Django:
```commandline
python manage.py dbshell
```
The SQLite client, created by the above command, automatically connect to the SQLite DB of this project. 

### I.7. Python namespacing:
1. Templates.
2. Url configuration (URLconf). 
3. Stylesheets.

### I.8. Good Web development practice:
1. Using method="post" (as opposed to method="get") is very important, because the act of submitting this form will alter data server-side. Whenever you create a form that alters data server-side, use method="post".
2. As the Python comment above points out, you should always return an HttpResponseRedirect after successfully dealing with POST data.

### I.9. Double Submit Problem:
1. [GET vs. POST](https://stackoverflow.com/questions/17375953/reload-history-behaviour-in-get-and-post-request)
2. [Double Submit Problem](https://www.theserverside.com/news/1365146/Redirect-After-Post)
> A POST request is not cached but still be stored in the process/thread of the browser tab.

3. [HTTP 302 Found](https://en.wikipedia.org/wiki/HTTP_302)

* Sever creates 1 thread to process requests from each client (browser).
* Back and forward operations of Google Chrome uses cache. Could use:
```commandline
python manage.py shell
```
to change some records and test this behavior.

### I.10. Race condition: 
* [Django race condition avoidance](https://docs.djangoproject.com/en/3.1/ref/models/expressions/#avoiding-race-conditions-using-f).

### I.11. Static files:
The {% static %} template tag is not available for use in static files which arenâ€™t generated by Django, like your stylesheet. You should always use relative paths to link your static files between each other, because then you can change STATIC_URL (used by the static template tag to generate its URLs) without having to modify a bunch of paths in your static files as well.
> "template" files are rendered by Django.

## II. Errors: 
1. Now we might be able to get away with putting our templates directly in polls/templates (rather than creating another polls subdirectory), but it would actually be a bad idea. Django will choose the first template it finds whose name matches, and if you had a template with the same name in a different application, Django would be unable to distinguish between them. We need to be able to point Django at the right one, and the best way to ensure this is by namespacing them. That is, by putting those templates inside another directory named for the application itself.
2. Reverse for '...' not found. '...' is not a valid view function or pattern name:
* Reason: Could not use HTML comment syntax to comment the Django codes, e.g.,
```html
<!-- {% url 'detail' question.id %} -->
```

3. KeyError: "'__name__' not in globals":
* Incorrect code: 
```python
from .models import Question
```
* Correct code:
```python
from polls.models import Question
```

4. Reverse for 'detail' with arguments '(3,)' not found. 1 pattern(s) tried: ['polls/int:pk/$']:
* Incorrect code: 
```python
path("int:pk/detail", views.DetailView.as_view(), name="detail"),
```
* Correct code: 
```python
path("<int:pk/detail>", views.DetailView.as_view(), name="detail"),
```
> This error mentions **Reverse** because of the Django utility function: reverse("polls:detail", args=3) 

5. TypeError: 'Question' object is not iterable:
* Incorrect code: 
```python
self.assertQuerysetEqual(
	response.context["question"],
	["<Question: Past Question>"]
)
```
* Correct code:
```python
 self.assertContains(response, past_question.question_text)
```

6. You are trying to add a non-nullable field 'sonic' to question without a de
fault; we can't do that (the database needs something to populate existing
rows).
* Incorrect code:
```python
testing_field = models.IntegerField()
```
* Correct code:
```python
testing_field = models.IntegerField(null=True)
```

## III. Commands:
* The **migrate** command looks at the INSTALLED_APPS  settings and
creates any necessary database tables according to the database settings in the **website/settings.py** file and
the database migrations shipped with the app.
```commandline
python manage.py migrate
```

## IV. Tricks:
* Double **Shift** to search everywhere.

## V. Django Automated Testing:
1. [Test-driven development](https://en.wikipedia.org/wiki/Test-driven_development).

